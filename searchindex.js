Search.setIndex({docnames:["evaluation_inference","index","setup_dependencies","training","updown/config","updown/data","updown/data.datasets","updown/data.readers","updown/models","updown/models.updown_captioner","updown/modules","updown/modules.attention","updown/modules.cbs","updown/modules.updown_cell","updown/utils","updown/utils.checkpointing","updown/utils.common","updown/utils.constraints","updown/utils.decoding","updown/utils.evalai"],envversion:{"sphinx.domains.c":1,"sphinx.domains.changeset":1,"sphinx.domains.citation":1,"sphinx.domains.cpp":1,"sphinx.domains.javascript":1,"sphinx.domains.math":2,"sphinx.domains.python":1,"sphinx.domains.rst":1,"sphinx.domains.std":1,"sphinx.ext.intersphinx":1,sphinx:56},filenames:["evaluation_inference.rst","index.rst","setup_dependencies.rst","training.rst","updown/config.rst","updown/data.rst","updown/data.datasets.rst","updown/data.readers.rst","updown/models.rst","updown/models.updown_captioner.rst","updown/modules.rst","updown/modules.attention.rst","updown/modules.cbs.rst","updown/modules.updown_cell.rst","updown/utils.rst","updown/utils.checkpointing.rst","updown/utils.common.rst","updown/utils.constraints.rst","updown/utils.decoding.rst","updown/utils.evalai.rst"],objects:{"updown.config":{Config:[4,1,1,""]},"updown.config.Config":{_validate:[4,2,1,""],dump:[4,2,1,""]},"updown.data":{datasets:[6,0,0,"-"],readers:[7,0,0,"-"]},"updown.data.datasets":{EvaluationDataset:[6,1,1,""],EvaluationDatasetWithConstraints:[6,1,1,""],TrainingDataset:[6,1,1,""]},"updown.data.datasets.EvaluationDataset":{from_config:[6,2,1,""]},"updown.data.datasets.EvaluationDatasetWithConstraints":{from_config:[6,2,1,""]},"updown.data.datasets.TrainingDataset":{from_config:[6,2,1,""]},"updown.data.readers":{CocoCaptionsReader:[7,1,1,""],ConstraintBoxesReader:[7,1,1,""],ImageFeaturesReader:[7,1,1,""]},"updown.models":{updown_captioner:[9,0,0,"-"]},"updown.models.updown_captioner":{UpDownCaptioner:[9,1,1,""]},"updown.models.updown_captioner.UpDownCaptioner":{_decode_step:[9,2,1,""],_get_loss:[9,2,1,""],_initialize_glove:[9,2,1,""],forward:[9,2,1,""],from_config:[9,2,1,""]},"updown.modules":{attention:[11,0,0,"-"],cbs:[12,0,0,"-"],updown_cell:[13,0,0,"-"]},"updown.modules.attention":{BottomUpTopDownAttention:[11,1,1,""]},"updown.modules.attention.BottomUpTopDownAttention":{_project_image_features:[11,3,1,""],forward:[11,2,1,""]},"updown.modules.updown_cell":{UpDownCell:[13,1,1,""]},"updown.modules.updown_cell.UpDownCell":{_average_image_features:[13,3,1,""],forward:[13,2,1,""]},"updown.utils":{checkpointing:[15,0,0,"-"],common:[16,0,0,"-"],constraints:[17,0,0,"-"],decoding:[18,0,0,"-"],evalai:[19,0,0,"-"]},"updown.utils.checkpointing":{CheckpointManager:[15,1,1,""]},"updown.utils.checkpointing.CheckpointManager":{step:[15,2,1,""]},"updown.utils.common":{cycle:[16,4,1,""]},"updown.utils.constraints":{add_constraint_words_to_vocabulary:[17,4,1,""]},"updown.utils.decoding":{select_best_beam:[18,4,1,""],select_best_beam_with_constraints:[18,4,1,""]},"updown.utils.evalai":{NocapsEvaluator:[19,1,1,""]},"updown.utils.evalai.NocapsEvaluator":{evaluate:[19,2,1,""]},updown:{config:[4,0,0,"-"]}},objnames:{"0":["py","module","Python module"],"1":["py","class","Python class"],"2":["py","method","Python method"],"3":["py","attribute","Python attribute"],"4":["py","function","Python function"]},objtypes:{"0":"py:module","1":"py:class","2":"py:method","3":"py:attribute","4":"py:function"},terms:{"case":[7,13],"class":[2,4,6,7,9,11,13,15,17,19],"default":[3,4,6,9,13,15,17,18,19],"final":2,"float":[6,15,19],"function":18,"import":[2,4],"int":[6,9,11,13,15,18,19],"long":2,"return":[6,7,9,11,13,17,18,19],"static":[],"true":[0,6,7],"while":[6,13],CBS:[2,4,6,9,17],For:[3,4,7,9,11,13,15],GBs:7,IDs:3,NMS:[4,6],One:[15,19],The:[2,3,7,9,13,17,18],These:[2,7,9,18],Use:6,Used:11,Using:16,__________:4,___________:13,__________________:13,__getitem__:7,__len__:7,_almost_:7,_average_image_featur:13,_decode_step:9,_get_loss:9,_initialize_glov:9,_project_image_featur:11,_valid:4,about:17,abs:[],access:[4,6],accord:18,accordingli:18,account:2,across:9,activ:2,actual:[11,13,19],adapt:[2,11,13],add:[0,17],add_constraint_words_to_vocabulari:17,added:[1,17],adjac:[6,9],after:4,agraw:1,all:[3,4,6,9,17,19],allennlp:[4,6,9,17],allow:[2,4,19],along:6,alreadi:[],also:[3,9,18],amazonaw:2,among:18,anaconda:2,analog:[9,13],anderson2017up:1,anderson:[1,2,9,11,13],ani:[4,7],anim:[4,6],annot:[4,6,7,19],annotations_trainval2017:2,answer:1,anyth:7,anywher:2,api:[11,13,15],appear:9,appli:11,apt:2,aption:1,architectur:[3,4,13],argpars:3,argument:3,arrang:2,articl:[],arxiv:[],assum:4,attend:11,attent:[1,4,9,10,13],attention_projection_s:[4,9,13],attr:7,attribut:4,auth:2,author:1,automat:17,avail:[2,4],averag:13,avoid:[4,17,19],base:[1,2,3,4,6,7,9,11,13,15,19],baselin:[2,3,4,7],basic:[9,13,18],batch:[4,6,9,11,13,16],batch_siz:[3,4,9,11,13,18],batra:1,beam:[1,3,4,6,9,18],beam_log_prob:18,beam_search:9,beam_siz:[4,9,18],beamsearch:[9,18],becaus:[6,7,9,11,13,16],befor:[4,9,11,13],behav:13,behind:2,benchmark:1,best:[3,9,15,18,19],bewar:7,binari:13,bject:1,bleu:19,booktitl:1,bool:[6,7,9],both:[11,19],bottom:[1,2,4,9,11,13],bottomuptopdownattent:11,bound:[2,4,6,7],boundari:9,box:[2,4,6,7,9,11,13],boxes_jsonpath:[6,7],browser:3,buehler:1,build:18,build_vocabulari:2,built:6,burn:4,butd:13,cach:[11,13],cale:1,call:[2,9,11,13,15],can:[2,3,4,6,7,19],caption:[2,4,6,7,9,13,17,19],caption_token:9,captions_jsonpath:[6,7],captions_train2017:[2,4],captions_val2017:2,captur:9,care:13,categori:7,caus:16,cbs:[1,2,4,9,10],cbs_select_best_beam:[],cell:[4,9,13],chang:18,checkpoint:[0,1,14,19],checkpointmanag:[3,15],chen:1,chosen:[],chri:1,cider:[3,19],cite:1,ckpt:15,ckpt_manag:15,class_hierarchi:[2,4],classmethod:[6,9],clean:[11,13],cli:2,clip:4,clip_gradi:4,clone:2,close:[2,15],cnn:7,cnstrain:3,coco:[1,2,4,6,7,19],coco_train2017:7,coco_train2017_resnet101_faster_rcnn_genome_adapt:[],coco_train2017_vg_detector_features_adapt:[2,4],coco_val2017:7,coco_val2017_vg_detector_features_adapt:2,cococaptionsread:7,cocodataset:2,code:1,codebas:1,collate_fn:6,collect:4,column:4,com:2,comma:[4,6,17],common:[1,11,14],comput:[1,4,9,11,13],conda:2,confer:1,confid:[2,4,6],config:[0,1,3,6,9],config_overrid:4,config_yaml:4,configur:[3,4],conflict:4,consid:1,constrain:[1,3,4,9],constrainedbeamsearch:[6,9,18],constraint:[1,2,4,6,9,14,18],constraint_wordform:[2,4],constraintboxesread:7,constructor:16,contain:[3,4,6,7,9,11,13,17,18],control:4,coordin:7,copi:3,correspond:[4,6,7,9,18],could:[2,6,17],cpu:3,creat:2,cross:9,current:13,curv:3,cvpr:1,cycl:16,damien:1,data:[1,2,4,9,16,17],dataload:[6,16],dataparallel:15,dataset:[1,5,7],decai:4,declar:[2,3],decod:[1,2,3,4,6,9,11,13,14],defin:[3,18],definit:[4,18],desai:1,descend:18,detail:[2,6],detect:[2,4,6,7],detector:[2,7],dev:2,develop:2,devi:1,devic:16,dhruv:1,dict:[4,9,13,15,16,19],differ:[3,9,11,13],dimens:[3,11,18],dir:3,directli:[0,6,9],directori:[2,4,15],disk:7,distribut:2,doe:[7,9],dog:[4,6],doing:19,domain:[9,19],done:[16,19],down:[1,4,9,11,13],drop:18,dump:4,duplic:17,dure:[0,3,4,6,9,15,19],each:[7,9,11,13],earli:19,effici:4,either:[2,4,9,18],element:[9,11],elsewher:4,embed:[0,3,4,7,9,13],embedding_s:[0,4,9,13],empti:15,enabl:19,end:4,entir:19,entropi:9,environ:2,epoch:[15,16],epoch_or_iter:15,error:4,etc:[4,6,17,19],evalai:[0,1,2,14],evalu:[1,3,4,9,11,13,19],evaluationdataset:6,evaluationdatasetwithconstraint:6,even:2,everi:3,exampl:[3,4,7,15,19],execut:[3,11,13],exhaust:19,exist:15,expand:17,experi:3,explod:4,extract:[2,4,6,7],extractor:2,fail:2,fals:[4,7,9],faster:2,featur:[4,6,7,9,11,13],feature_s:7,features_h5path:7,few:[3,19],field:[6,7,17],fig:13,file:[0,3,4,6,7,15,17],file_path:4,filename_prefix:15,filesystem:2,filter:[4,6],find:[1,4,9],finit:[6,9],first:[3,4,6,9,11,13,17],fix:16,flag:0,follow:[0,2,3,7,13,15],forc:9,form:[4,6,17],format:[2,4,6,7,19],forward:[9,11,13],four:7,from:[2,3,4,6,7,9,11,13,16],from_config:[6,9],frozen:[0,3,9],fsm:[6,9,18],fulli:3,gener:[0,4,6,16],genom:2,get:[0,1,2],git:2,github:2,given:[9,13,18],given_constraint:18,glove:[0,3,9],goe:18,gould:1,gpu:0,gradient:4,ground:[6,9],hand:18,happen:4,harm:16,harsh:1,has:18,have:[2,7,16],height:7,held:[2,19],help:9,henc:9,here:[4,6,7,9],hidden:[4,9,13],hidden_s:[4,9,13],hidden_st:13,hierarchi:[2,4,6],hierarchy_jsonpath:6,higher:[2,4,6,15],highest:18,hit:15,how:[1,18,19],howev:19,http:2,human:2,hyper:4,hyperparamet:[3,4],iccv:1,ids:[0,3,7],ignor:9,imag:[1,4,6,7,9,11,13,17],image_bottomup_featur:7,image_featur:[9,11,13],image_feature_s:[4,9,11,13],image_features_h5path:6,image_features_mask:11,image_id:[7,19],imagefeaturesread:7,implement:[1,7,18],in_memori:[6,7],index:[6,7,9],infer:[1,6,9],infer_box:4,infer_capt:4,infer_featur:4,infinit:19,info:[2,4],initi:[3,4,9,13],inproceed:1,input:[4,9,13],instanc:[6,7,9,11,13],instanti:[4,6,9],instead:15,instruct:7,integ:7,intern:[1,9],iou:[4,6],iter:[3,4,16,19],itertool:16,itself:[11,13],jain:1,johnson:1,journal:[],json:[0,2,4,6,7],karan:1,keep:[3,11,13,15],kei:[3,4,7,9,13,19],kwarg:[6,9],languag:[4,6,9,13],last:[11,13],leak:16,learn:[4,15,19],least:[7,11,13,18,19],lee:1,lei:1,length:[4,6,7,9],less:[18,19],lesser:[9,11,13],let:4,libxml2:2,libxstl1:2,like:[4,9],likelihood:[9,18],linear:15,linearli:4,list:[4,6,17,19],load:[6,7],local:19,localhost:3,log:9,logdir:3,logit:9,longer:[4,6,9],loop:19,loss:[3,9],lower:15,lru:[11,13],lstm:[4,9,11,13],lstmcell:[9,13],machin:[6,9],made:2,mai:[4,7,9,16],maintain:[11,13],make:6,manag:[3,4],mani:18,map:[6,9],mark:1,mask:[9,11,13],matric:6,matrix:9,max:15,max_caption_length:[4,6,9],max_decoding_step:18,max_given_constraint:[4,6],max_words_per_constraint:4,maxim:9,maximum:[4,6,9,11,13],mean:13,meaning:9,memori:[6,7,16],meta:2,meteor:19,method:7,metric:[3,15,19],might:[9,11,13],min:15,min_constraints_to_satisfi:[4,9,18],miniconda:2,minimum:[4,9,18],mode:15,model:[0,1,4,6,15,19],modif:4,modul:[1,4,9,15],momentum:4,more:[2,3,6,9],most:[4,9],much:7,multi:4,multipl:9,must:[4,7],name:[4,6,7,17],namespac:17,need:[15,17],nest:[4,19],net_beam_s:9,never:9,next:13,nms_threshold:[4,6],nocap:[0,2,3,4,6,7,19],nocaps2019:1,nocaps_test:7,nocaps_test_image_info:2,nocaps_test_oi_detector_box:2,nocaps_test_resnet101_faster_rcnn_genome_adapt:[],nocaps_test_vg_detector_features_adapt:2,nocaps_v:7,nocaps_val_image_info:[2,4],nocaps_val_oi_detector_box:[2,4],nocaps_val_resnet101_faster_rcnn_genome_adapt:[],nocaps_val_vg_detector_features_adapt:[2,4],nocapsevalu:19,non:15,none:[9,11,13,19],nonetyp:[9,11,13,16,19],note:[4,6,15,19],notion:16,now:2,num_box:[7,9,11,13],num_constraint:9,num_epoch:15,num_imag:7,num_iter:4,num_stat:[9,18],number:[3,4,6,9,16,18,19],numpi:4,object:[2,4,6,7,15,17,19],observ:15,occurr:6,onc:[11,13],one:[2,3,7,9],onli:[0,1,3,7,18],open:[2,4,6,7,17],optim:[3,4,15],option:[4,6,7,9,13,15,17,18,19],org:[1,2],origin:3,other:[3,7],our:[2,3,4,7],out:[9,18,19],output:[0,11,13],ovel:1,over:[9,11],overal:3,overrid:[0,3,4],overriden:4,own:3,packag:[2,4],pad:[9,11,13],pair:[3,9],paper:[1,3,4],paramet:[4,6,7,9,11,13,15,17,18,19],parikh:1,particular:[3,4,9,13],pass:[3,7],path:[0,3,4,6,7,15,17],per:[2,6,9],perform:[3,4,9,13,15,19],period:15,perpetu:16,peter:1,phase:[4,19],pip:2,pleas:1,plural:[2,4,6,17],pool:13,port:3,possibl:[3,4,6,17],practic:19,pre:[2,4,6,7],predict:[0,4,6,9,13,19],prefix:15,preprint:[],pretrain:[0,2],previou:9,previous_predict:9,primari:7,privat:[2,19],probabl:9,process:7,produc:7,profil:2,project:[4,9,11,13],project_root:2,projection_s:11,propos:[1,2],provid:[2,4,6,9,11,13,17],pth:[0,15],publicli:4,python3:2,python:[0,2,3],pytorch:[4,6,7,11,15],queri:11,query_s:11,query_vector:11,question:1,rais:4,ram:7,random:[4,16],random_se:4,randomli:[3,4,9],rang:15,rate:[4,15,19],rcnn:2,read:7,readabl:[2,4],reader:[1,5],recommend:[2,4,7,9,19],record:15,recurr:9,refer:[3,6],region:2,regular:9,rel:4,relev:4,remain:[11,13],remot:19,repo:2,repositori:2,repres:[6,9],reproduc:[3,4],requir:[2,4,6,7,19],result:[0,3],retriev:19,rishabh:1,root:4,roug:19,row:3,run:[3,9],same:[9,11,13],sampl:4,satisfi:[2,4,6,9,18],save:[0,4,11,13,15],schedul:[15,19],score:[3,4,6],script:[0,2,3,19],search:[1,3,4,9],second:[3,4,6,17],seed:4,seen:[11,13],select:[2,4,6,9,18,19],select_best_beam:18,select_best_beam_with_constraint:[6,18],self:[4,9,11,13,15,19],semant:9,sensibl:4,separ:[4,6,17],sequenc:[4,6,9,18],sequenti:4,serial:[3,15],serialization_dir:[3,15],serv:19,set:[3,7,18],set_token:2,setup:1,sgd:[4,15],shape:[7,9,11,13,18],should:[3,7],show:[9,19],signatur:[11,13],similar:[7,13],simpli:7,singl:[11,13],singular:[2,4,6,17],site:2,size:[3,4,7,9,11,13],some:[11,13],sometim:7,sort:18,sourc:[1,4,6,7,9,11,13,15,16,17,18,19],specif:[3,6,19],specifi:[0,4,6,15,18],spice:19,split:[2,7,19],start:18,state:[4,6,9,13,15,18],state_dict:15,stefan:1,step:[9,11,13,15],stephen:1,stop:19,stove:4,str:[4,6,7,9,13,15,16,17,19],structur:[2,4,19],style:3,submiss:19,submit:[0,19],suffici:7,sum:9,support:[1,3,18],suppress:[4,6],symlink:[2,4],synonym:2,tabl:3,take:[9,13,19],target:9,target_mask:9,teacher:9,ten:7,tenei:1,tensor:[6,9,11,13,15,16,18],tensorboard:3,test:[0,2,4,6,7,19],test_capt:[],test_featur:[],textual:[4,9,11,13],than:[4,6,7,9,18],thei:[9,18,19],them:[2,19],thi:[0,1,3,4,6,7,9,11,13,15,16,18,19],those:3,threshold:[2,4,6],through:[2,3,4,7],till:4,time:[4,9,11,13],titl:1,tmp:15,togeth:19,token:[2,6,7,9,13,17],token_embed:13,too:[7,9],tool:19,top:[1,4,9,11,13],torch:[6,9,11,13,15,16,18],total:[9,18],track:[3,15],train2017:[2,4,6,7],train:[0,1,2,4,6,7,9,11,13,15,16,19],train_capt:4,train_featur:4,trainingdataset:6,transit:[6,9],truncat:[4,6,9],truth:[6,9],tsv:[2,4,6,17],tupl:[9,13],two:[4,6,7,17],txt:2,type:[15,19],typic:[7,11],under:[2,3],unexpec:16,union:[9,11,13,15,19],unit:13,unknown:9,unnorm:9,updat:[9,13,15],updown:2,updown_caption:[1,8],updown_cel:[1,10],updown_nocaps_v:3,updown_plus_cb:3,updown_plus_cbs_nocaps_v:3,updowncaption:[6,9,13],updowncel:[9,11,13],use:[0,4,7,9,11,13],use_cb:[0,4,9],used:[3,6,7,9,11,16,19],useful:1,user:19,uses:3,using:[0,1,2,3,7,9,11,19],usual:[6,7],util:[1,3,6,7],val:[0,2,3,4,6,7,19],val_capt:[],val_featur:[],val_loss:15,valid:[0,4,15],valu:[3,4,11,13,15],variabl:13,vector:[9,11],veri:[13,19],version:2,via:2,vision:1,visit:3,visual:[1,2],vocab_s:9,vocabulari:[4,6,9,17],wai:2,wang:1,weight:[4,9,11,13],weight_decai:4,well:1,when:[6,9,15],where:[9,11,19],whether:[4,6,7,9],which:[2,3,4,6,11,13,15,16,17,18,19],wide:4,width:7,wish:[0,2,9],without:19,wood:4,word:[2,3,4,6,7,9,13,17],wordform:[2,4],wordforms_tsvpath:[6,17],work:19,worker:3,worri:17,would:[3,9,11,13],wrap:6,write:3,www:2,xiaodong:1,xinlei:1,yaml:[0,3,4],year:1,yet:9,yield:16,you:[0,1,4,7],your:[1,2],your_token_her:2,yufei:1,zero:[4,9,11,13],zhang:1,zip:2},titles:["How to evaluate or do inference?","UpDown Captioner Baseline for <code class=\"docutils literal notranslate\"><span class=\"pre\">nocaps</span></code>","How to setup this codebase?","How to train your captioner?","updown.config","updown.data","updown.data.datasets","updown.data.readers","updown.models","updown.models.updown_captioner","updown.modules","updown.modules.attention","updown.modules.cbs","updown.modules.updown_cell","updown.utils","updown.utils.checkpointing","updown.utils.common","updown.utils.constraints","updown.utils.decoding","updown.utils.evalai"],titleterms:{CBS:3,Using:0,addit:3,all:2,annot:2,api:1,attent:11,baselin:1,beam:[0,2],build:2,caption:[1,3],cbs:12,checkpoint:[3,15],codebas:2,common:16,config:4,constrain:[0,2],constraint:17,data:[5,6,7],dataset:6,decod:18,depend:2,detail:3,download:2,evalai:19,evalu:[0,2],featur:2,file:2,gpu:3,guid:1,how:[0,2,3],imag:2,infer:0,instal:2,log:3,model:[3,8,9],modul:[10,11,12,13],multi:3,nocap:1,option:2,reader:7,refer:1,save:3,search:[0,2],server:2,set:2,setup:2,thi:2,train:3,updown:[1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],updown_caption:9,updown_cel:13,use:2,user:1,util:[14,15,16,17,18,19],vocabulari:2,without:3,you:2,your:3}})